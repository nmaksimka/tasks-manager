<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ Task Manager</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link th:href="@{/css/style.css}" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="fade-in">
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">
            <div class="text-center mb-5">
                <a th:href="@{/}" class="text-decoration-none">
                    <h1 class="display-4 fw-bold mb-2">üöÄ Task Manager</h1>
                </a>
                <p class="lead text-muted">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ —Ç—ã—Å—è—á–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</p>
            </div>

            <div class="card shadow-lg">
                <div class="card-header text-center py-4">
                    <h2 class="fw-bold mb-0"><i class="fas fa-user-plus me-2"></i>–°–æ–∑–¥–∞–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞</h2>
                </div>
                <div class="card-body p-5">
                    <div class="row mb-4">
                        <div class="col-md-4">
                            <div class="text-center mb-3">
                                <div class="rounded-circle bg-primary p-3 d-inline-flex mb-2">
                                    <i class="fas fa-user-check fa-2x text-white"></i>
                                </div>
                                <h6>–ü—Ä–æ—Å—Ç–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h6>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="text-center mb-3">
                                <div class="rounded-circle bg-success p-3 d-inline-flex mb-2">
                                    <i class="fas fa-shield-alt fa-2x text-white"></i>
                                </div>
                                <h6>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</h6>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="text-center mb-3">
                                <div class="rounded-circle bg-warning p-3 d-inline-flex mb-2">
                                    <i class="fas fa-rocket fa-2x text-white"></i>
                                </div>
                                <h6>–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø</h6>
                            </div>
                        </div>
                    </div>

                    <div class="theme-selector mb-4 text-center">
                        <small class="text-muted me-3">–¢–µ–º–∞:</small>
                        <div class="btn-group" role="group">
                            <button type="button" class="btn btn-sm btn-outline-primary" onclick="setTheme('light')">
                                <i class="fas fa-sun me-1"></i>–°–≤–µ—Ç–ª–∞—è
                            </button>
                            <button type="button" class="btn btn-sm btn-outline-primary" onclick="setTheme('dark')">
                                <i class="fas fa-moon me-1"></i>–¢–µ–º–Ω–∞—è
                            </button>
                            <button type="button" class="btn btn-sm btn-outline-primary" onclick="setTheme('auto')">
                                <i class="fas fa-robot me-1"></i>–ê–≤—Ç–æ
                            </button>
                        </div>
                    </div>

                    <div th:if="${error}" class="alert alert-danger d-flex align-items-center" role="alert">
                        <i class="fas fa-exclamation-circle me-2"></i>
                        <div th:text="${error}"></div>
                    </div>

                    <form th:action="@{/register}" method="post" th:object="${registrationRequest}" class="needs-validation" novalidate>
                        <div class="row">
                            <div class="col-md-6 mb-4">
                                <label for="username" class="form-label fw-bold">
                                    <i class="fas fa-user-tag me-1"></i>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è *
                                </label>
                                <div class="input-group">
                                    <span class="input-group-text bg-light border-end-0">
                                        <i class="fas fa-user text-muted"></i>
                                    </span>
                                    <input type="text" class="form-control border-start-0" id="username" th:field="*{username}" required
                                           placeholder="username123" minlength="3" maxlength="50">
                                </div>
                                <div class="form-text">–û—Ç 3 –¥–æ 50 —Å–∏–º–≤–æ–ª–æ–≤</div>
                            </div>

                            <div class="col-md-6 mb-4">
                                <label for="email" class="form-label fw-bold">
                                    <i class="fas fa-envelope me-1"></i>Email *
                                </label>
                                <div class="input-group">
                                    <span class="input-group-text bg-light border-end-0">
                                        <i class="fas fa-at text-muted"></i>
                                    </span>
                                    <input type="email" class="form-control border-start-0" id="email" th:field="*{email}" required
                                           placeholder="example@mail.com">
                                </div>
                                <div class="form-text">–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–µ–π—Å—Ç–≤—É—é—â–∏–π email</div>
                            </div>
                        </div>

                        <div class="mb-4">
                            <label for="password" class="form-label fw-bold">
                                <i class="fas fa-lock me-1"></i>–ü–∞—Ä–æ–ª—å *
                            </label>
                            <div class="input-group">
                                <span class="input-group-text bg-light border-end-0">
                                    <i class="fas fa-key text-muted"></i>
                                </span>
                                <input type="password" class="form-control border-start-0" id="password" th:field="*{password}" required
                                       placeholder="–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤" minlength="6">
                                <button class="btn btn-outline-secondary border-start-0" type="button" id="togglePassword">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                            <div class="password-strength mt-2">
                                <div class="progress" style="height: 6px;">
                                    <div class="progress-bar" id="passwordStrength" style="width: 0%"></div>
                                </div>
                                <small class="text-muted" id="passwordHint">–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å</small>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-4">
                                <label for="firstName" class="form-label fw-bold">
                                    <i class="fas fa-id-card me-1"></i>–ò–º—è
                                </label>
                                <div class="input-group">
                                    <span class="input-group-text bg-light border-end-0">
                                        <i class="fas fa-user text-muted"></i>
                                    </span>
                                    <input type="text" class="form-control border-start-0" id="firstName" th:field="*{firstName}"
                                           placeholder="–ò–≤–∞–Ω (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)">
                                </div>
                            </div>

                            <div class="col-md-6 mb-4">
                                <label for="lastName" class="form-label fw-bold">
                                    <i class="fas fa-id-card me-1"></i>–§–∞–º–∏–ª–∏—è
                                </label>
                                <div class="input-group">
                                    <span class="input-group-text bg-light border-end-0">
                                        <i class="fas fa-user text-muted"></i>
                                    </span>
                                    <input type="text" class="form-control border-start-0" id="lastName" th:field="*{lastName}"
                                           placeholder="–ò–≤–∞–Ω–æ–≤ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)">
                                </div>
                            </div>
                        </div>

                        <div class="mb-4 form-check">
                            <input type="checkbox" class="form-check-input" id="terms" required>
                            <label class="form-check-label" for="terms">
                                –Ø —Å–æ–≥–ª–∞—Å–µ–Ω —Å <a href="#" class="text-primary">—É—Å–ª–æ–≤–∏—è–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</a> –∏ <a href="#" class="text-primary">–ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>
                            </label>
                        </div>

                        <div class="d-grid gap-2 mb-4">
                            <button type="submit" class="btn btn-primary btn-lg py-3">
                                <i class="fas fa-user-plus me-2"></i>–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç
                            </button>
                        </div>

                        <div class="text-center">
                            <p class="text-muted mb-2">–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç?</p>
                            <a th:href="@{/login}" class="btn btn-outline-primary">
                                <i class="fas fa-sign-in-alt me-1"></i>–í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
                            </a>
                        </div>
                    </form>
                </div>
                <div class="card-footer text-center py-3">
                    <small class="text-muted">
                        <i class="fas fa-check-circle text-success me-1"></i>–ë–µ—Å–ø–ª–∞—Ç–Ω–æ ‚Ä¢ –ë–µ–∑ —Ä–µ–∫–ª–∞–º—ã ‚Ä¢ –ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
                    </small>
                </div>
            </div>

            <div class="mt-4 text-center">
                <div class="card border-0 bg-transparent">
                    <div class="card-body">
                        <h6 class="fw-bold mb-3">–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Task Manager:</h6>
                        <div class="row text-muted small">
                            <div class="col-md-3 mb-2">
                                <i class="fas fa-check-circle text-success me-1"></i>–ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
                            </div>
                            <div class="col-md-3 mb-2">
                                <i class="fas fa-check-circle text-success me-1"></i>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∏ –¥–µ–¥–ª–∞–π–Ω—ã
                            </div>
                            <div class="col-md-3 mb-2">
                                <i class="fas fa-check-circle text-success me-1"></i>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã
                            </div>
                            <div class="col-md-3 mb-2">
                                <i class="fas fa-check-circle text-success me-1"></i>–¢–µ–º–Ω–∞—è —Ç–µ–º–∞
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
    document.getElementById('togglePassword').addEventListener('click', function() {
        const passwordInput = document.getElementById('password');
        const icon = this.querySelector('i');
        if (passwordInput.type === 'password') {
            passwordInput.type = 'text';
            icon.classList.remove('fa-eye');
            icon.classList.add('fa-eye-slash');
        } else {
            passwordInput.type = 'password';
            icon.classList.remove('fa-eye-slash');
            icon.classList.add('fa-eye');
        }
    });

    document.getElementById('password').addEventListener('input', function() {
        const password = this.value;
        const strengthBar = document.getElementById('passwordStrength');
        const hint = document.getElementById('passwordHint');

        let strength = 0;
        let hintText = '';

        if (password.length > 5) strength += 25;
        if (password.length > 8) strength += 25;
        if (/[A-Z]/.test(password)) strength += 25;
        if (/[0-9]/.test(password)) strength += 25;

        strengthBar.style.width = strength + '%';

        if (strength < 25) {
            strengthBar.className = 'progress-bar bg-danger';
            hintText = '–°–ª–∞–±—ã–π –ø–∞—Ä–æ–ª—å';
        } else if (strength < 50) {
            strengthBar.className = 'progress-bar bg-warning';
            hintText = '–°—Ä–µ–¥–Ω–∏–π –ø–∞—Ä–æ–ª—å';
        } else if (strength < 75) {
            strengthBar.className = 'progress-bar bg-info';
            hintText = '–•–æ—Ä–æ—à–∏–π –ø–∞—Ä–æ–ª—å';
        } else {
            strengthBar.className = 'progress-bar bg-success';
            hintText = '–û—Ç–ª–∏—á–Ω—ã–π –ø–∞—Ä–æ–ª—å!';
        }

        hint.textContent = hintText;
    });

    function setTheme(theme) {
        if (theme === 'dark') {
            document.body.classList.add('dark-theme');
            localStorage.setItem('theme', 'dark');
        } else if (theme === 'light') {
            document.body.classList.remove('dark-theme');
            localStorage.setItem('theme', 'light');
        } else if (theme === 'auto') {
            localStorage.setItem('theme', 'auto');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            if (prefersDark) {
                document.body.classList.add('dark-theme');
            } else {
                document.body.classList.remove('dark-theme');
            }
        }
    }

    document.addEventListener('DOMContentLoaded', function() {
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark') {
            document.body.classList.add('dark-theme');
        } else if (savedTheme === 'light') {
            document.body.classList.remove('dark-theme');
        } else if (savedTheme === 'auto') {
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            if (prefersDark) {
                document.body.classList.add('dark-theme');
            }
        } else {
            localStorage.setItem('theme', 'auto');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            if (prefersDark) {
                document.body.classList.add('dark-theme');
            }
        }

        const form = document.querySelector('.needs-validation');
        form.addEventListener('submit', function(event) {
            if (!form.checkValidity()) {
                event.preventDefault();
                event.stopPropagation();
            }
            form.classList.add('was-validated');
        }, false);
    });

    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function(e) {
        const currentTheme = localStorage.getItem('theme');
        if (currentTheme === 'auto') {
            if (e.matches) {
                document.body.classList.add('dark-theme');
            } else {
                document.body.classList.remove('dark-theme');
            }
        }
    });
</script>
</body>
</html>